{% extends "market/base.html" %} {% block title %}Manage My Products
<!-- Prettier-ignore -->
{% endblock %} {% block content %}
<div class="container mt-5">
  <h2>Manage My Products</h2>

  {% if products %}
  <div class="row">
    {% for product in products %}
    <div class="card mb-3">
      <div class="card-body d-flex justify-content-between align-items-center">
        <!-- Product Image -->
        <div style="width: 120px">
          {% if product.image %}
          <img
            src="{{ product.image.url }}"
            class="img-fluid rounded"
            alt="{{ product.name }}"
          />
          {% else %}
          <img
            src="https://via.placeholder.com/120x80?text=No+Image"
            class="img-fluid rounded"
            alt="No image"
          />
          {% endif %}
        </div>

        <!-- Product Details -->
        <div class="flex-grow-1 ms-3">
          <strong>{{ product.name }}</strong><br />
          <small>{{ product.description }}</small><br />
          <small>Price per unit: R{{ product.price }}</small><br />
          <small>Stock available: {{ product.stock }}</small>
        </div>

        <!-- Buttons -->
        <div class="d-flex gap-2">
          <!-- Edit button -->
          <a
            href="{% url 'market:edit_product' product.id %}"
            class="btn btn-outline-primary btn-sm"
          >
            Edit
          </a>

          <!-- Delete product form - requires confirmation -->
          <form
            method="post"
            action="{% url 'market:delete_product' product.id %}"
          >
            {% csrf_token %}
            <button
              type="submit"
              class="btn btn-outline-danger btn-sm"
              onclick="return confirm('Are you sure you want to delete this product?');"
            >
              Delete
            </button>
          </form>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p class="text-warning">You don't have any products yet.</p>
  {% endif %}

  <!-- Back button -->
  <div class="mb-3">
    <a href="{% url 'market:welcome' %}" class="btn btn-secondary">Back</a>
  </div>
</div>
{% endblock %}
